/* Bizuit Custom Form: dashboard-integration-demo */
/* Built: 2025-11-19T06:07:31.467Z */
/* React: window.React (external) */
/* ReactDOM: window.ReactDOM (external) */

// Use global React from runtime app
const React = window.React;
const ReactDOM = window.ReactDOM;
var $=Object.create;var P=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var A=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var j=(t,a,o,b)=>{if(a&&typeof a=="object"||typeof a=="function")for(let d of L(a))!O.call(t,d)&&d!==o&&P(t,d,{get:()=>a[d],enumerable:!(b=q(a,d))||b.enumerable});return t};var D=(t,a,o)=>(o=t!=null?$(U(t)):{},j(a||!t||!t.__esModule?P(o,"default",{value:t,enumerable:!0}):o,t));var B=A((M,C)=>{C.exports=window.React});var y=A((W,K)=>{K.exports={jsx:window.React.createElement,jsxs:window.React.createElement,Fragment:window.React.Fragment}});var n=D(B()),e=D(y()),{BizuitSDK:V,formDataToParameters:J}=window.BizuitFormSDK||{},{DynamicFormField:p}=window.BizuitUIComponents||{};function Q({dashboardParams:t}){let[a]=(0,n.useState)(()=>V?new V({apiUrl:"/api/bizuit",timeout:12e4}):null),[o,b]=(0,n.useState)([]),[d,h]=(0,n.useState)({}),[v,N]=(0,n.useState)(!0),[w,I]=(0,n.useState)(!1),[F,S]=(0,n.useState)(null),[k,E]=(0,n.useState)(!1),[R,x]=(0,n.useState)(null),g=t&&Object.keys(t).length>0,c=t?.eventName||"samplewebpages",f=t?.token?`Bearer ${t.token}`:void 0;(0,n.useEffect)(()=>{console.log("[Dashboard Integration Demo] Form mounted with params:",t),console.log("[Dashboard Integration Demo] SDK available:",!!a),console.log("[Dashboard Integration Demo] DynamicFormField available:",!!p)},[t]),(0,n.useEffect)(()=>{async function s(){if(!a||!g){N(!1);return}try{N(!0),console.log(`[Dashboard Integration Demo] Loading parameters for process: ${c}`);let l=await a.process.getParameters(c,"",f);console.log("[Dashboard Integration Demo] Raw parameters from API:",l);let i=l.filter(r=>!r.isSystemParameter&&!r.isVariable&&(r.parameterDirection===1||r.parameterDirection===3));console.log("[Dashboard Integration Demo] Loaded parameters:",i,{length:i.length}),b(i);let u={};i.forEach(r=>{r.value!==null&&r.value!==void 0&&(u[r.name]=r.value)}),h(u)}catch(l){console.error("[Dashboard Integration Demo] Error loading parameters:",l),x(`Error cargando par\xE1metros: ${l.message}`)}finally{N(!1)}}s()},[a,g,c,f]);let z=async()=>{if(!a){x("SDK no est\xE1 disponible");return}try{E(!0),x(null),console.log("[Dashboard Integration Demo] Starting process with form data:",d);let s=o.filter(r=>!r.isVariable&&(r.parameterDirection===1||r.parameterDirection===3)),l={};s.forEach(r=>{d[r.name]!==void 0&&(l[r.name]=d[r.name])});let i=J(l);console.log("[Dashboard Integration Demo] Process parameters to send:",i);let u=await a.process.start({processName:c,parameters:i,instanceId:t?.instanceId},void 0,f);S(u),I(!0),console.log("[Dashboard Integration Demo] Process started successfully:",u)}catch(s){console.error("[Dashboard Integration Demo] Error starting process:",s),x(s.message||"Error starting process")}finally{E(!1)}},T=(s,l)=>{h(i=>({...i,[s]:l}))};return!a||!p?(0,e.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,e.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[(0,e.jsx)("p",{className:"text-red-800 dark:text-red-200 font-semibold mb-2",children:"\u274C Error: SDK o componentes UI no disponibles"}),(0,e.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-300",children:["SDK: ",a?"\u2705":"\u274C"," | DynamicFormField: ",p?"\u2705":"\u274C"]})]})}):(0,e.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,e.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-8",children:[(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Dashboard Integration Demo"}),(0,e.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"\u{1F517} Formulario de demostraci\xF3n - Integraci\xF3n con Bizuit Dashboard"}),(0,e.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-2",children:["Versi\xF3n 1.0.0 - Inicia proceso '",c,"' con par\xE1metros din\xE1micos del Dashboard"]})]}),(0,e.jsx)("div",{className:"mb-6",children:g?(0,e.jsx)("div",{className:"inline-flex items-center px-4 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,e.jsx)("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:"\u2705 Cargado desde Dashboard"})}):(0,e.jsx)("div",{className:"inline-flex items-center px-4 py-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,e.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400 font-semibold",children:"\u26A0\uFE0F Acceso directo (sin par\xE1metros del Dashboard)"})})}),g&&(0,e.jsxs)("details",{className:"mb-8",children:[(0,e.jsx)("summary",{className:"cursor-pointer text-lg font-semibold text-slate-900 dark:text-white mb-4 hover:text-blue-600",children:"\u{1F4CB} Ver Par\xE1metros del Dashboard (click para expandir)"}),(0,e.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-lg p-6 space-y-4 mt-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"De Query String:"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,e.jsx)(m,{label:"Instance ID",value:t?.instanceId}),(0,e.jsx)(m,{label:"User Name",value:t?.userName}),(0,e.jsx)(m,{label:"Event Name",value:t?.eventName}),(0,e.jsx)(m,{label:"Activity Name",value:t?.activityName}),(0,e.jsx)(m,{label:"Auth Token",value:t?.token,sensitive:!0})]})]}),(0,e.jsxs)("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[(0,e.jsx)("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"De SecurityTokens (validado):"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,e.jsx)(m,{label:"Token ID",value:t?.tokenId}),(0,e.jsx)(m,{label:"Operation",value:t?.operation?.toString()}),(0,e.jsx)(m,{label:"Requester Address",value:t?.requesterAddress}),(0,e.jsx)(m,{label:"Expiration Date",value:t?.expirationDate})]})]})]})]}),g&&(0,e.jsxs)("div",{className:"mb-8",children:[(0,e.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"\u{1F4DD} Completar Formulario"}),v?(0,e.jsxs)("div",{className:"text-center py-8",children:[(0,e.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,e.jsx)("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:"Cargando par\xE1metros del proceso..."})]}):o.length>0?(0,e.jsx)("form",{className:"space-y-4",children:o.map((s,l)=>(0,e.jsx)(p,{parameter:s,value:d[s.name],onChange:i=>T(s.name,i)},s.name||`param-${l}`))}):(0,e.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,e.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["\u2139\uFE0F El proceso '",c,"' no tiene par\xE1metros de entrada configurados."]})})]}),R&&(0,e.jsx)("div",{className:"mb-8 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,e.jsxs)("p",{className:"text-sm text-red-800 dark:text-red-200",children:["\u274C Error: ",R]})}),!w&&g&&(0,e.jsx)("div",{className:"mb-8",children:(0,e.jsx)("button",{onClick:z,disabled:k||v,className:`
                w-full px-6 py-4 rounded-lg font-semibold text-lg transition-colors
                ${!k&&!v?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer shadow-lg hover:shadow-xl":"bg-slate-300 dark:bg-slate-600 text-slate-500 dark:text-slate-400 cursor-not-allowed"}
              `,children:k?"\u23F3 Iniciando proceso...":`\u{1F680} Iniciar Proceso '${c}'`})}),w&&(0,e.jsx)("div",{className:"mb-8",children:(0,e.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6",children:[(0,e.jsxs)("div",{className:"flex items-center mb-4",children:[(0,e.jsx)("span",{className:"text-3xl mr-3",children:"\u2705"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-200",children:"Proceso iniciado exitosamente"}),(0,e.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Instance ID: ",F?.instanceId||"N/A"]})]})]}),(0,e.jsxs)("details",{className:"mt-4",children:[(0,e.jsx)("summary",{className:"cursor-pointer text-sm font-semibold text-green-700 dark:text-green-300 hover:text-green-600",children:"Ver resultado completo"}),(0,e.jsx)("pre",{className:"mt-2 text-xs text-green-800 dark:text-green-200 overflow-x-auto bg-white dark:bg-slate-800 p-4 rounded",children:JSON.stringify(F,null,2)})]}),(0,e.jsx)("button",{onClick:()=>{I(!1),S(null)},className:"mt-4 px-4 py-2 text-sm bg-green-600 hover:bg-green-700 text-white rounded-lg",children:"Reiniciar Formulario"})]})}),!g&&(0,e.jsxs)("div",{className:"mb-8 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:[(0,e.jsx)("p",{className:"text-yellow-800 dark:text-yellow-200 mb-2",children:"\u26A0\uFE0F Este formulario debe ser cargado desde el Dashboard de Bizuit."}),(0,e.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Para probarlo, accede desde un proceso en el Dashboard que use este formulario."})]}),(0,e.jsxs)("div",{className:"mt-8 p-4 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg",children:[(0,e.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:(0,e.jsx)("strong",{children:"\u{1F50D} Debug Info:"})}),(0,e.jsxs)("ul",{className:"text-sm text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:[(0,e.jsx)("li",{children:"\u2022 Form cargado din\xE1micamente desde BD"}),(0,e.jsx)("li",{children:"\u2022 React compartido globalmente (window.React)"}),(0,e.jsxs)("li",{children:["\u2022 SDK disponible: ",a?"\u2705":"\u274C"]}),(0,e.jsxs)("li",{children:["\u2022 DynamicFormField disponible: ",p?"\u2705":"\u274C"]}),(0,e.jsxs)("li",{children:["\u2022 Proceso: ",c]}),(0,e.jsxs)("li",{children:["\u2022 Par\xE1metros cargados: ",o.length]})]})]})]})})}function m({label:t,value:a,sensitive:o=!1}){let b=a?o?G(a):a:(0,e.jsx)("span",{className:"text-slate-400 dark:text-slate-500 italic",children:"no proporcionado"});return(0,e.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[(0,e.jsx)("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:t}),(0,e.jsx)("div",{className:"text-sm font-mono text-slate-900 dark:text-white break-all",children:b})]})}function G(t){return t.length<=10?"***"+t.slice(-4):t.slice(0,10)+"..."+t.slice(-4)}export{Q as default};
//# sourceMappingURL=form.js.map
